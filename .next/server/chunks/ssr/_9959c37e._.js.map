{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/FiltersBar.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  minCredit: string;\r\n  setMinCredit: (v: string) => void;\r\n  minDaysSince: string;\r\n  setMinDaysSince: (v: string) => void;\r\n  lastInteraction: string;\r\n  setLastInteraction: (v: string) => void;\r\n  seller: string;\r\n  setSeller: (v: string) => void;\r\n};\r\n\r\nexport default function FiltersBar({\r\n  minCredit, setMinCredit,\r\n  minDaysSince, setMinDaysSince,\r\n  lastInteraction, setLastInteraction,\r\n  seller, setSeller,\r\n}: Props) {\r\n  const inputStyle =\r\n    \"w-full border border-gray-400 px-3 py-2 rounded text-gray-700 \" +\r\n    \"focus:outline-none focus:ring-2 focus:ring-[#b6f01f] focus:border-[#b6f01f]\";\r\n\r\n  return (\r\n    <div className=\"flex flex-col md:flex-row gap-6 items-start\">\r\n\r\n      <div className=\"flex-1 bg-white rounded-xl px-4 py-2 shadow\">\r\n        <label htmlFor=\"minCredit\" className=\"text-sm text-gray-600 block mb-2\">\r\n          Cr√©dito M√≠nimo\r\n        </label>\r\n        <input\r\n          id=\"minCredit\"\r\n          type=\"number\"\r\n          min={0}\r\n          value={minCredit}\r\n          onChange={(e) => setMinCredit(e.target.value)}\r\n          className={inputStyle}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex-1 bg-white rounded-xl px-4 py-2 shadow\">\r\n        <label htmlFor=\"minDays\" className=\"text-sm text-gray-600 block mb-2\">\r\n          √öltima compra\r\n        </label>\r\n        <input\r\n          id=\"minDays\"\r\n          type=\"number\"\r\n          min={0}\r\n          value={minDaysSince}\r\n          onChange={(e) => setMinDaysSince(e.target.value)}\r\n          className={inputStyle}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex-1 bg-white rounded-xl px-4 py-2 shadow\">\r\n        <label\r\n          htmlFor=\"lastInteraction\"\r\n          className=\"text-sm text-gray-600 block mb-2\"\r\n        >\r\n          √öltima intera√ß√£o\r\n        </label>\r\n        <input\r\n          id=\"lastInteraction\"\r\n          type=\"number\"\r\n          min={0}\r\n          value={lastInteraction}\r\n          onChange={(e) => setLastInteraction(e.target.value)}\r\n          className={inputStyle}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex-1 bg-white rounded-xl px-4 py-2 shadow\">\r\n        <label htmlFor=\"seller\" className=\"text-sm text-gray-600 block mb-2\">\r\n          Vendedor\r\n        </label>\r\n        <input\r\n          id=\"seller\"\r\n          type=\"search\"\r\n          value={seller}\r\n          onChange={(e) => setSeller(e.target.value)}\r\n          className={inputStyle}\r\n        />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAce,SAAS,WAAW,EACjC,SAAS,EAAE,YAAY,EACvB,YAAY,EAAE,eAAe,EAC7B,eAAe,EAAE,kBAAkB,EACnC,MAAM,EAAE,SAAS,EACX;IACN,MAAM,aACJ,mEACA;IAEF,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,SAAQ;wBAAY,WAAU;kCAAmC;;;;;;kCAGxE,8OAAC;wBACC,IAAG;wBACH,MAAK;wBACL,KAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC5C,WAAW;;;;;;;;;;;;0BAIf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,SAAQ;wBAAU,WAAU;kCAAmC;;;;;;kCAGtE,8OAAC;wBACC,IAAG;wBACH,MAAK;wBACL,KAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wBAC/C,WAAW;;;;;;;;;;;;0BAIf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAQ;wBACR,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBACC,IAAG;wBACH,MAAK;wBACL,KAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;wBAClD,WAAW;;;;;;;;;;;;0BAIf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,SAAQ;wBAAS,WAAU;kCAAmC;;;;;;kCAGrE,8OAAC;wBACC,IAAG;wBACH,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wBACzC,WAAW;;;;;;;;;;;;;;;;;;AAMrB","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/utils.ts"],"sourcesContent":["export function daysSince(dateLike?: string | Date | null) {\r\n  if (!dateLike) return Infinity;                 // nunca interagiu\r\n  const d = new Date(dateLike);\r\n  if (isNaN(d.getTime())) return Infinity;        // inv√°lida ‚Üí trata como nunca\r\n  const diffMs = Date.now() - d.getTime();\r\n  return Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n}\r\n\r\nexport const keyOf = (v: string | number) => String(v);\r\n\r\nexport function cleanName(raw: string): string {\r\n  if (!raw) return \"\";\r\n\r\n  const s = raw.replace(/^\\d+\\s*[-:]?\\s*/g, \"\");\r\n  \r\n  const full_name = s.split(\" \");\r\n  return full_name.slice(0,2).join(\" \")\r\n}\r\n\r\nconst onlyDigits = (s?: string | null) => (s || \"\").replace(/\\D/g, \"\");\r\n\r\n// normaliza para formato local: DDD + n√∫mero (sem DDI, sem s√≠mbolo)\r\nconst normalizePhone = (input?: string | null) => {\r\n  const digits = onlyDigits(input);\r\n\r\n  if (!digits) return \"\";\r\n\r\n  // se vier com DDI + DDD + n√∫mero (ex: 5561996246646), remove o 55\r\n  if (digits.length > 11 && digits.startsWith(\"55\")) {\r\n    return digits.slice(2); // tira o 55\r\n  }\r\n\r\n  // se j√° estiver local (61 996246646 ‚Üí 61996246646), mant√©m\r\n  return digits;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,UAAU,QAA+B;IACvD,IAAI,CAAC,UAAU,OAAO,UAA0B,kBAAkB;IAClE,MAAM,IAAI,IAAI,KAAK;IACnB,IAAI,MAAM,EAAE,OAAO,KAAK,OAAO,UAAiB,8BAA8B;IAC9E,MAAM,SAAS,KAAK,GAAG,KAAK,EAAE,OAAO;IACrC,OAAO,KAAK,KAAK,CAAC,SAAS,CAAC,OAAO,KAAK,KAAK,EAAE;AACjD;AAEO,MAAM,QAAQ,CAAC,IAAuB,OAAO;AAE7C,SAAS,UAAU,GAAW;IACnC,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,IAAI,IAAI,OAAO,CAAC,oBAAoB;IAE1C,MAAM,YAAY,EAAE,KAAK,CAAC;IAC1B,OAAO,UAAU,KAAK,CAAC,GAAE,GAAG,IAAI,CAAC;AACnC;AAEA,MAAM,aAAa,CAAC,IAAsB,CAAC,KAAK,EAAE,EAAE,OAAO,CAAC,OAAO;AAEnE,oEAAoE;AACpE,MAAM,iBAAiB,CAAC;IACtB,MAAM,SAAS,WAAW;IAE1B,IAAI,CAAC,QAAQ,OAAO;IAEpB,kEAAkE;IAClE,IAAI,OAAO,MAAM,GAAG,MAAM,OAAO,UAAU,CAAC,OAAO;QACjD,OAAO,OAAO,KAAK,CAAC,IAAI,YAAY;IACtC;IAEA,2DAA2D;IAC3D,OAAO;AACT","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/ClientsTable.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useMemo, useRef } from \"react\";\r\nimport { Client, SelectedMap } from \"./types\";\r\nimport { daysSince, keyOf , cleanName} from \"./utils\";\r\n\r\ntype Props = {\r\n  clients: Client[];\r\n  selectedMap: SelectedMap;\r\n  onToggle: (id: string | number) => void;\r\n  allFilteredSelected: boolean;\r\n  onToggleSelectAll: () => void;\r\n};\r\n\r\nexport default function ClientsTable({\r\n  clients,\r\n  selectedMap,\r\n  onToggle,\r\n  allFilteredSelected,\r\n  onToggleSelectAll,\r\n}: Props) {\r\n  const masterRef = useRef<HTMLInputElement>(null);\r\n  const checkedAll = Boolean(allFilteredSelected);\r\n\r\n  const selectedCount = useMemo(\r\n    () => clients.filter(c => !!selectedMap[keyOf(c.id_cliente)]).length,\r\n    [clients, selectedMap]\r\n  );\r\n  const someSelected = selectedCount > 0 && !checkedAll;\r\n\r\n  useEffect(() => {\r\n    if (masterRef.current) {\r\n      masterRef.current.indeterminate = someSelected;\r\n    }\r\n  }, [someSelected]);\r\n\r\n  const moneyFormatter = new Intl.NumberFormat(\"pt-BR\");\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-4 shadow\">\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <h3 className=\"text-lg font-medium text-gray-700\">Clientes filtrados</h3>\r\n\r\n        <label className=\"inline-flex items-center gap-2 text-sm text-gray-700\">\r\n          <input\r\n            ref={masterRef}\r\n            type=\"checkbox\"\r\n            checked={checkedAll}\r\n            onChange={onToggleSelectAll}\r\n          />\r\n          <span>\r\n            Selecionar todos ({selectedCount}/{clients.length})\r\n          </span>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"max-h-80 overflow-auto\">\r\n        <table className=\"w-full text-sm text-gray-600\">\r\n          <thead className=\"bg-gray-100 sticky top-0\">\r\n            <tr>\r\n              <th className=\"p-2 w-10\" aria-label=\"Selecionar cliente\" />\r\n              <th className=\"p-2 text-left\">Nome</th>\r\n              <th className=\"p-2 text-left\">Limite de Cr√©dito</th>\r\n              {/* <th className=\"p-2 text-left\">√öltima compra</th> */}\r\n              <th className=\"p-2 text-left\">√öltima intera√ß√£o</th>\r\n              <th className=\"p-2 text-left\">Vendedor</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {clients.map((c) => {\r\n              const k = keyOf(c.id_cliente);\r\n              const checked = !!selectedMap[k];\r\n\r\n              // üß† Calcula dias desde compra\r\n              const diasCompra = daysSince(c.data_ultima_compra);\r\n              const textoCompra = Number.isFinite(diasCompra)\r\n                ? `${diasCompra} dias`\r\n                : \"‚Äî\";\r\n\r\n              // üß† Calcula dias desde √∫ltima intera√ß√£o\r\n              const diasInteracao = daysSince(c.ultima_interacao);\r\n              const textoInteracao = !c.ultima_interacao\r\n                ? <span className=\"text-gray-400 italic\">Nunca</span>\r\n                : Number.isFinite(diasInteracao)\r\n                ? `${diasInteracao} dias`\r\n                : <span className=\"text-gray-400 italic\">Nunca</span>;\r\n\r\n              return (\r\n                <tr key={k} className=\"border border-gray-300 hover:bg-gray-50\">\r\n                  <td className=\"p-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={checked}\r\n                      onChange={() => onToggle(c.id_cliente)}\r\n                      aria-label={`Selecionar ${c.Cliente}`}\r\n                    />\r\n                  </td>\r\n                  <td className=\"p-2\">{c.Cliente}</td>\r\n                  <td className=\"p-2\">{moneyFormatter.format(c.Limite)}</td>\r\n                  {/* <td className=\"p-2\">{textoCompra}</td> */}\r\n                  <td className=\"p-2\">{textoInteracao}</td>\r\n                  <td className=\"p-2\">{cleanName(c.Vendedor)}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n\r\n            {clients.length === 0 && (\r\n              <tr>\r\n                <td colSpan={6} className=\"p-4 text-center text-gray-400\">\r\n                  N√£o h√° clientes com esses filtros.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AAHA;;;;AAae,SAAS,aAAa,EACnC,OAAO,EACP,WAAW,EACX,QAAQ,EACR,mBAAmB,EACnB,iBAAiB,EACX;IACN,MAAM,YAAY,IAAA,+MAAM,EAAmB;IAC3C,MAAM,aAAa,QAAQ;IAE3B,MAAM,gBAAgB,IAAA,gNAAO,EAC3B,IAAM,QAAQ,MAAM,CAAC,CAAA,IAAK,CAAC,CAAC,WAAW,CAAC,IAAA,oIAAK,EAAC,EAAE,UAAU,EAAE,EAAE,MAAM,EACpE;QAAC;QAAS;KAAY;IAExB,MAAM,eAAe,gBAAgB,KAAK,CAAC;IAE3C,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,OAAO,EAAE;YACrB,UAAU,OAAO,CAAC,aAAa,GAAG;QACpC;IACF,GAAG;QAAC;KAAa;IAEjB,MAAM,iBAAiB,IAAI,KAAK,YAAY,CAAC;IAE7C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAElD,8OAAC;wBAAM,WAAU;;0CACf,8OAAC;gCACC,KAAK;gCACL,MAAK;gCACL,SAAS;gCACT,UAAU;;;;;;0CAEZ,8OAAC;;oCAAK;oCACe;oCAAc;oCAAE,QAAQ,MAAM;oCAAC;;;;;;;;;;;;;;;;;;;0BAKxD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAM,WAAU;;sCACf,8OAAC;4BAAM,WAAU;sCACf,cAAA,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;wCAAW,cAAW;;;;;;kDACpC,8OAAC;wCAAG,WAAU;kDAAgB;;;;;;kDAC9B,8OAAC;wCAAG,WAAU;kDAAgB;;;;;;kDAE9B,8OAAC;wCAAG,WAAU;kDAAgB;;;;;;kDAC9B,8OAAC;wCAAG,WAAU;kDAAgB;;;;;;;;;;;;;;;;;sCAGlC,8OAAC;;gCACE,QAAQ,GAAG,CAAC,CAAC;oCACZ,MAAM,IAAI,IAAA,oIAAK,EAAC,EAAE,UAAU;oCAC5B,MAAM,UAAU,CAAC,CAAC,WAAW,CAAC,EAAE;oCAEhC,+BAA+B;oCAC/B,MAAM,aAAa,IAAA,wIAAS,EAAC,EAAE,kBAAkB;oCACjD,MAAM,cAAc,OAAO,QAAQ,CAAC,cAChC,GAAG,WAAW,KAAK,CAAC,GACpB;oCAEJ,yCAAyC;oCACzC,MAAM,gBAAgB,IAAA,wIAAS,EAAC,EAAE,gBAAgB;oCAClD,MAAM,iBAAiB,CAAC,EAAE,gBAAgB,iBACtC,8OAAC;wCAAK,WAAU;kDAAuB;;;;;+CACvC,OAAO,QAAQ,CAAC,iBAChB,GAAG,cAAc,KAAK,CAAC,iBACvB,8OAAC;wCAAK,WAAU;kDAAuB;;;;;;oCAE3C,qBACE,8OAAC;wCAAW,WAAU;;0DACpB,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDACC,MAAK;oDACL,SAAS;oDACT,UAAU,IAAM,SAAS,EAAE,UAAU;oDACrC,cAAY,CAAC,WAAW,EAAE,EAAE,OAAO,EAAE;;;;;;;;;;;0DAGzC,8OAAC;gDAAG,WAAU;0DAAO,EAAE,OAAO;;;;;;0DAC9B,8OAAC;gDAAG,WAAU;0DAAO,eAAe,MAAM,CAAC,EAAE,MAAM;;;;;;0DAEnD,8OAAC;gDAAG,WAAU;0DAAO;;;;;;0DACrB,8OAAC;gDAAG,WAAU;0DAAO,IAAA,wIAAS,EAAC,EAAE,QAAQ;;;;;;;uCAblC;;;;;gCAgBb;gCAEC,QAAQ,MAAM,KAAK,mBAClB,8OAAC;8CACC,cAAA,8OAAC;wCAAG,SAAS;wCAAG,WAAU;kDAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAU1E","debugId":null}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/searchMesages.tsx"],"sourcesContent":["// components/searchMesages.tsx\r\n\"use client\";\r\nimport { Search } from \"lucide-react\";\r\n\r\ninterface Props {\r\n  searchQuery: string;\r\n  setSearchQuery?: (v: string) => void;\r\n}\r\n\r\nexport default function SearchMensagens({ searchQuery, setSearchQuery }: Props) {\r\n  return (\r\n    <div className=\"w-full max-w-[65vh]\">\r\n\r\n      <div className=\"group relative bg-white rounded-2xl shadow px-3 py-2 flex items-center\">\r\n        <Search size={18} className=\"mr-2 text-gray-400 group-hover:text-blue-500 transition\" />\r\n        <input\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery?.(e.target.value)}\r\n          placeholder=\"Pesquisar por status, categoria ou texto...\"\r\n          className=\"w-full bg-transparent outline-none text-gray-600 placeholder-gray-300 group-hover:placeholder-gray-400 focus:placeholder-gray-400 transition\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAE/B;AADA;;;AAQe,SAAS,gBAAgB,EAAE,WAAW,EAAE,cAAc,EAAS;IAC5E,qBACE,8OAAC;QAAI,WAAU;kBAEb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,gNAAM;oBAAC,MAAM;oBAAI,WAAU;;;;;;8BAC5B,8OAAC;oBACC,OAAO;oBACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;oBAChD,aAAY;oBACZ,WAAU;;;;;;;;;;;;;;;;;AAKpB","debugId":null}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/MessagesTable.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Message } from \"./types\";\r\n\r\ntype Props = {\r\n  messages: Message[];\r\n  searchQuery: string;\r\n  selectedMessageID?: string;\r\n  onSelectMessage?: (id: string) => void;\r\n};\r\n\r\nexport default function MessagesCardsList({\r\n  messages,\r\n  searchQuery,\r\n  selectedMessageID,\r\n  onSelectMessage,\r\n}: Props) {\r\n  const [localSelected, setLocalSelected] = useState<string>(selectedMessageID ?? \"\");\r\n\r\n  useEffect(() => {\r\n    if (selectedMessageID !== undefined) setLocalSelected(selectedMessageID);\r\n  }, [selectedMessageID]);\r\n\r\n  const filtered = messages\r\n  // .filter((m) => (m.status ?? \"\").toLowerCase() === \"approved\")\r\n  .filter((m) =>\r\n    m.titulo.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    m.categoria.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    m.texto.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const handleSelect = (id: string) => {\r\n    setLocalSelected(id);\r\n    onSelectMessage?.(id);\r\n  };\r\n\r\n  return (\r\n    <section className=\"rounded-xl bg-white shadow-md p-4\">\r\n      <header className=\"mb-3 flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold text-slate-800\">Mensagens</h3>\r\n        <span className=\"text-xs text-slate-500\">{filtered.length}</span>\r\n      </header>\r\n\r\n      {filtered.length === 0 ? (\r\n        <p className=\"text-sm text-slate-400 italic\">Nenhuma mensagem encontrada.</p>\r\n      ) : (\r\n        <ul className=\"space-y-3\">\r\n          {filtered.map((m) => {\r\n            const isSelected = localSelected === m.id_mensagem;\r\n\r\n            return (\r\n              <li\r\n                key={m.id_mensagem}\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                aria-selected={isSelected}\r\n                onClick={() => handleSelect(m.id_mensagem)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\" || e.key === \" \") {\r\n                    e.preventDefault();\r\n                    handleSelect(m.id_mensagem);\r\n                  }\r\n                }}\r\n                className={`rounded-lg border p-3 transition \r\n                  cursor-pointer outline-none\r\n                  ${isSelected\r\n                    ? \"border-blue-400 bg-blue-50 shadow-sm\"\r\n                    : \"border-slate-200 hover:bg-slate-50\"\r\n                  }\r\n                `}\r\n              >\r\n                {/* T√çTULO */}\r\n                <div className=\"text-[13px] font-semibold text-slate-800 truncate\">\r\n                  {m.titulo}\r\n                </div>\r\n\r\n                {/* CATEGORIA */}\r\n                <div className=\"mt-0.5 text-[12px] text-slate-500\">\r\n                  {m.categoria}\r\n                </div>\r\n\r\n                {/* TEXTO */}\r\n                <div className=\"mt-2 text-[12px] text-slate-600 line-clamp-2\">\r\n                  {m.texto}\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAYe,SAAS,kBAAkB,EACxC,QAAQ,EACR,WAAW,EACX,iBAAiB,EACjB,eAAe,EACT;IACN,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAS,qBAAqB;IAEhF,IAAA,kNAAS,EAAC;QACR,IAAI,sBAAsB,WAAW,iBAAiB;IACxD,GAAG;QAAC;KAAkB;IAEtB,MAAM,WAAW,QACjB,gEAAgE;KAC/D,MAAM,CAAC,CAAC,IACP,EAAE,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OACvD,EAAE,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAC1D,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW;IAGxD,MAAM,eAAe,CAAC;QACpB,iBAAiB;QACjB,kBAAkB;IACpB;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCACrD,8OAAC;wBAAK,WAAU;kCAA0B,SAAS,MAAM;;;;;;;;;;;;YAG1D,SAAS,MAAM,KAAK,kBACnB,8OAAC;gBAAE,WAAU;0BAAgC;;;;;qCAE7C,8OAAC;gBAAG,WAAU;0BACX,SAAS,GAAG,CAAC,CAAC;oBACb,MAAM,aAAa,kBAAkB,EAAE,WAAW;oBAElD,qBACE,8OAAC;wBAEC,MAAK;wBACL,UAAU;wBACV,iBAAe;wBACf,SAAS,IAAM,aAAa,EAAE,WAAW;wBACzC,WAAW,CAAC;4BACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;gCACtC,EAAE,cAAc;gCAChB,aAAa,EAAE,WAAW;4BAC5B;wBACF;wBACA,WAAW,CAAC;;kBAEV,EAAE,aACE,yCACA,qCACH;gBACH,CAAC;;0CAGD,8OAAC;gCAAI,WAAU;0CACZ,EAAE,MAAM;;;;;;0CAIX,8OAAC;gCAAI,WAAU;0CACZ,EAAE,SAAS;;;;;;0CAId,8OAAC;gCAAI,WAAU;0CACZ,EAAE,KAAK;;;;;;;uBA/BL,EAAE,WAAW;;;;;gBAmCxB;;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/MessagesPanel.tsx"],"sourcesContent":["\"use client\";\r\nimport SearchMensagens from \"../searchMesages\";\r\nimport MessagesTable from \"./MessagesTable\";\r\nimport { Message } from \"./types\";\r\n\r\ntype Props = {\r\n  messages: Message[];\r\n  search: string;\r\n  setSearch: (v: string) => void;\r\n  selectedMessageID: string;\r\n  onSelectMessage: (id: string) => void;\r\n};\r\n\r\nexport default function MessagesPanel({\r\n  messages, search, setSearch, selectedMessageID, onSelectMessage,\r\n}: Props) {\r\n  return (\r\n    <>\r\n      <div className=\"bg-white rounded-xl shadow\">\r\n        <SearchMensagens searchQuery={search} setSearchQuery={setSearch} />\r\n      </div>\r\n\r\n      <div className=\" rounded-xl  shadow overflow-auto max-h-[70vh]\">\r\n        <MessagesTable\r\n          messages={messages}\r\n          searchQuery={search}\r\n          selectedMessageID={selectedMessageID}\r\n          onSelectMessage={onSelectMessage}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAae,SAAS,cAAc,EACpC,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,iBAAiB,EAAE,eAAe,EACzD;IACN,qBACE;;0BACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,uIAAe;oBAAC,aAAa;oBAAQ,gBAAgB;;;;;;;;;;;0BAGxD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,+IAAa;oBACZ,UAAU;oBACV,aAAa;oBACb,mBAAmB;oBACnB,iBAAiB;;;;;;;;;;;;;AAK3B","debugId":null}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/MessagePreview.tsx"],"sourcesContent":["\"use client\";\r\nimport { Message } from \"./types\";\r\n\r\nexport default function MessagePreview({ message }: { message?: Message }) {\r\n  return (\r\n    <div className=\"mb-3\">\r\n      <label className=\"text-sm text-gray-600 block mb-1\">Mensagem Selecionada</label>\r\n      {message ? (\r\n        <div className=\"p-3 border rounded bg-gray-50\">\r\n          <div className=\"font-semibold text-gray-700\">{message.titulo}</div>\r\n          <div className=\"text-sm mt-1 text-gray-700\">{message.texto}</div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-gray-400 italic\">N√£o h√° mensagem selecionada. Escolha uma no painel a direita.</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAGe,SAAS,eAAe,EAAE,OAAO,EAAyB;IACvE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;0BAAmC;;;;;;YACnD,wBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAA+B,QAAQ,MAAM;;;;;;kCAC5D,8OAAC;wBAAI,WAAU;kCAA8B,QAAQ,KAAK;;;;;;;;;;;qCAG5D,8OAAC;gBAAI,WAAU;0BAAuB;;;;;;;;;;;;AAI9C","debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/SendActions.tsx"],"sourcesContent":["\"use client\";\r\nimport { Client, Message, Contacts } from \"./types\";\r\nimport { keyOf } from \"./utils\";\r\nimport { useRef } from \"react\";\r\n\r\ntype SendResult = {\r\n  clientId: number;\r\n  contactId: number;\r\n  telefone: string | null;\r\n  ok: boolean;\r\n  status?: number;\r\n  data?: unknown;\r\n  error?: string;\r\n};\r\n\r\ntype SendSummary = {\r\n  total: number;\r\n  successCount: number;\r\n  failCount: number;\r\n  details: SendResult[];\r\n};\r\n\r\ntype Props = {\r\n  sending: boolean;\r\n  selectedMap: Record<string, boolean>;\r\n  clients: Client[];\r\n  contacts: Contacts[];\r\n  selectedMessage?: Message;\r\n  onResult: (summary: SendSummary) => void;\r\n  onResetSelection: () => void;\r\n  onStart?: () => void;\r\n};\r\n\r\nexport default function SendActions({\r\n  sending,\r\n  selectedMap,\r\n  clients,\r\n  contacts,\r\n  selectedMessage,\r\n  onResult,\r\n  onResetSelection,\r\n  onStart,\r\n}: Props) {\r\n  const inFlight = useRef(false);\r\n\r\n  const handleSendBatch = async () => {\r\n    if (inFlight.current) return; // impedir cliques repetidos\r\n    inFlight.current = true;\r\n    onStart?.();\r\n\r\n    const selectedIds = Object.keys(selectedMap);\r\n    console.log(\"[handleSendBatch] selectedIds:\", selectedIds);\r\n\r\n    if (!selectedMessage) {\r\n      alert(\"Selecione uma mensagem primeiro.\");\r\n      inFlight.current = false;\r\n      return;\r\n    }\r\n\r\n    if (selectedIds.length === 0) {\r\n      alert(\"Selecione pelo menos um cliente.\");\r\n      inFlight.current = false;\r\n      return;\r\n    }\r\n\r\n    const messageText = selectedMessage.texto ?? \"\";\r\n    const imageUrl = selectedMessage.imagem || undefined;\r\n\r\n    if (!messageText && !imageUrl) {\r\n      alert(\"Mensagem selecionada est√° vazia.\");\r\n      inFlight.current = false;\r\n      return;\r\n    }\r\n\r\n    // üîó Monta pares { client, contact } usando contatos_cliente\r\n    const recipients: { client: Client; contact: Contacts }[] = selectedIds\r\n      .map((id) => {\r\n        const client = clients.find((c) => keyOf(c.id_cliente) === id);\r\n        if (!client) return null;\r\n\r\n        const contact = contacts.find(\r\n          (ct) =>\r\n            ct.id_cliente === client.id_cliente &&\r\n            ct.telefone &&\r\n            String(ct.telefone).trim() !== \"\"\r\n        );\r\n\r\n        if (!contact) {\r\n          console.warn(\r\n            `[handleSendBatch] Cliente ${client.id_cliente} n√£o possui contato com telefone.`\r\n          );\r\n          return null;\r\n        }\r\n\r\n        return { client, contact };\r\n      })\r\n      .filter(\r\n        (pair): pair is { client: Client; contact: Contacts } => pair !== null\r\n      );\r\n\r\n    console.log(\r\n      \"[handleSendBatch] recipients (client + contact):\",\r\n      recipients.map((r) => ({\r\n        id_cliente: r.client.id_cliente,\r\n        nome_cliente: r.client.Cliente,\r\n        contato: r.contact.nome_contato,\r\n        telefone: r.contact.telefone,\r\n      }))\r\n    );\r\n\r\n    const details: SendResult[] = [];\r\n    const toSend = recipients; // se quiser testar s√≥ 1: recipients.slice(0, 1)\r\n\r\n    for (const { client, contact } of toSend) {\r\n      try {\r\n        const payload = {\r\n          to: contact.telefone,\r\n          message: messageText,\r\n          imageUrl,\r\n          clientId: client.id_cliente,\r\n          contactId: contact.id_contato,\r\n          messageId: selectedMessage.id_mensagem,\r\n        };\r\n\r\n        console.log(\"[handleSendBatch] enviando para:\", payload);\r\n\r\n        const res = await fetch(\"/api/send_message\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(payload),\r\n        });\r\n\r\n        const data = (await res.json().catch(() => ({}))) as unknown;\r\n\r\n        details.push({\r\n          clientId: Number(client.id_cliente),\r\n          contactId: Number(contact.id_contato),\r\n          telefone: contact.telefone,\r\n          ok: res.ok,\r\n          status: res.status,\r\n          data,\r\n        });\r\n\r\n        await new Promise((r) => setTimeout(r, 120));\r\n      } catch (e: unknown) {\r\n        details.push({\r\n          clientId: Number(client.id_cliente),\r\n          contactId: Number(contact.id_contato),\r\n          telefone: contact.telefone,\r\n          ok: false,\r\n          error:\r\n            e instanceof Error ? e.message : `Erro desconhecido: ${String(e)}`,\r\n        });\r\n      }\r\n    }\r\n\r\n    inFlight.current = false;\r\n\r\n    const successCount = details.filter((d) => d.ok).length;\r\n    const failCount = details.length - successCount;\r\n\r\n    const summary: SendSummary = {\r\n      total: details.length,\r\n      successCount,\r\n      failCount,\r\n      details,\r\n    };\r\n\r\n    onResult(summary);\r\n    onResetSelection();\r\n  };\r\n\r\n  const disabled =\r\n    sending || !selectedMessage || Object.keys(selectedMap).length === 0;\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-4\">\r\n      <button\r\n        onClick={handleSendBatch}\r\n        disabled={disabled}\r\n        className=\"\r\n          bg-[#b6f01f]\r\n          text-[#1a1a1a]\r\n          px-5 py-2\r\n          rounded\r\n          disabled:opacity-50\r\n          transition-all duration-150\r\n          hover:scale-105\r\n          active:scale-95\r\n          disabled:hover:scale-100\r\n          disabled:active:scale-100\r\n        \"\r\n      >\r\n        {sending ? \"Enviando...\" : \"Enviar mensagem\"}\r\n      </button>\r\n      <div className=\"text-sm text-gray-700\">\r\n        Selecionados: <strong>{Object.keys(selectedMap).length}</strong>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 889, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/ResultSummary.tsx"],"sourcesContent":["\"use client\";\r\n\r\nexport default function ResultSummary({ summary }: { summary: any }) {\r\n  if (!summary) return null;\r\n\r\n  const details = summary.details || [];\r\n\r\n  return (\r\n    <div className=\"mt-4 bg-gray-50 p-4 rounded-xl border border-gray-200 shadow-sm\">\r\n      <div className=\"text-gray-800 font-semibold mb-2\">Resumo de Envio</div>\r\n\r\n      <div className=\"space-y-1 text-sm\">\r\n        <div><strong>Total:</strong> {summary.total}</div>\r\n        <div className=\"text-green-600\"><strong>Sucessos:</strong> {summary.successCount}</div>\r\n        <div className=\"text-red-600\"><strong>Falhas:</strong> {summary.failCount}</div>\r\n      </div>\r\n\r\n      {details.length > 0 && (\r\n        <details className=\"mt-3\">\r\n          <summary className=\"cursor-pointer text-gray-700 hover:underline\">\r\n            Ver Detalhes ({details.length})\r\n          </summary>\r\n          <div className=\"mt-3 overflow-auto max-h-72 border-t border-gray-200 pt-2\">\r\n            <table className=\"min-w-full text-sm text-left text-gray-700\">\r\n              <thead>\r\n                <tr className=\"border-b bg-gray-100\">\r\n                  <th className=\"py-2 px-3\">Cliente ID</th>\r\n                  <th className=\"py-2 px-3\">Telefone</th>\r\n                  <th className=\"py-2 px-3\">Status</th>\r\n                  <th className=\"py-2 px-3\">Mensagem</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {details.map((d: any, i: number) => (\r\n                  <tr key={i} className=\"border-b last:border-none\">\r\n                    <td className=\"py-2 px-3\">{d.clientId}</td>\r\n                    <td className=\"py-2 px-3\">{d.telefone}</td>\r\n                    <td\r\n                      className={`py-2 px-3 font-medium ${\r\n                        d.ok ? \"text-green-600\" : \"text-red-600\"\r\n                      }`}\r\n                    >\r\n                      {d.ok ? \"Sucesso\" : \"Erro\"}\r\n                    </td>\r\n                    <td className=\"py-2 px-3\">\r\n                      {d.data?.data?.detail || \"‚Äî\"}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </details>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,cAAc,EAAE,OAAO,EAAoB;IACjE,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,UAAU,QAAQ,OAAO,IAAI,EAAE;IAErC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BAAmC;;;;;;0BAElD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CAAI,8OAAC;0CAAO;;;;;;4BAAe;4BAAE,QAAQ,KAAK;;;;;;;kCAC3C,8OAAC;wBAAI,WAAU;;0CAAiB,8OAAC;0CAAO;;;;;;4BAAkB;4BAAE,QAAQ,YAAY;;;;;;;kCAChF,8OAAC;wBAAI,WAAU;;0CAAe,8OAAC;0CAAO;;;;;;4BAAgB;4BAAE,QAAQ,SAAS;;;;;;;;;;;;;YAG1E,QAAQ,MAAM,GAAG,mBAChB,8OAAC;gBAAQ,WAAU;;kCACjB,8OAAC;wBAAQ,WAAU;;4BAA+C;4BACjD,QAAQ,MAAM;4BAAC;;;;;;;kCAEhC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAM,WAAU;;8CACf,8OAAC;8CACC,cAAA,8OAAC;wCAAG,WAAU;;0DACZ,8OAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAY;;;;;;;;;;;;;;;;;8CAG9B,8OAAC;8CACE,QAAQ,GAAG,CAAC,CAAC,GAAQ,kBACpB,8OAAC;4CAAW,WAAU;;8DACpB,8OAAC;oDAAG,WAAU;8DAAa,EAAE,QAAQ;;;;;;8DACrC,8OAAC;oDAAG,WAAU;8DAAa,EAAE,QAAQ;;;;;;8DACrC,8OAAC;oDACC,WAAW,CAAC,sBAAsB,EAChC,EAAE,EAAE,GAAG,mBAAmB,gBAC1B;8DAED,EAAE,EAAE,GAAG,YAAY;;;;;;8DAEtB,8OAAC;oDAAG,WAAU;8DACX,EAAE,IAAI,EAAE,MAAM,UAAU;;;;;;;2CAXpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsB3B","debugId":null}},
    {"offset": {"line": 1114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/components/home/HomeClient.tsx"],"sourcesContent":["// components/home/HomeClient.tsx\r\n\"use client\";\r\nimport { useMemo, useState } from \"react\";\r\nimport FiltersBar from \"./FiltersBar\";\r\nimport ClientsTable from \"./ClientsTable\";\r\nimport MessagesPanel from \"./MessagesPanel\";\r\nimport MessagePreview from \"./MessagePreview\";\r\nimport SendActions from \"./SendActions\";\r\nimport ResultSummary from \"./ResultSummary\";\r\n\r\nimport { Client, Message, SelectedMap, Contacts } from \"./types\";\r\nimport { daysSince, keyOf } from \"./utils\";\r\n\r\ntype Props = {\r\n  Clients: Client[];\r\n  Messages: Message[];\r\n  Contacts: Contacts[];\r\n};\r\n\r\nexport default function HomeClient({ Clients: clients, Messages, Contacts }: Props) {\r\n  const [minCredit, setMinCredit] = useState(\"0\");\r\n  const [minDays, setMinDays] = useState(\"0\");\r\n  const [lastInteraction, setLastInteraction] = useState(\"0\"); \r\n  const [seller, setSeller] = useState(\"\"); \r\n\r\n  const [messageSearch, setMessageSearch] = useState(\"\");\r\n  const [messageID, setMessageID] = useState(\"\");\r\n  const [selected, setSelected] = useState<SelectedMap>({});\r\n  const [sending, setSending] = useState(false);\r\n  const [summary, setSummary] = useState<any>(null);\r\n\r\n  const selectedMessage = Messages.find((m) => m.id_mensagem === messageID);\r\n\r\nconst filteredClients = useMemo(() => {\r\n  const minCreditNum = parseFloat(minCredit || \"0\");\r\n  const minDaysNum = parseInt(minDays || \"0\", 10);\r\n  const lastIntNum = parseInt(lastInteraction || \"0\", 10);\r\n  const sellerTerm = seller.trim().toLowerCase();\r\n\r\n\r\n  const validClients = clients.filter((c) => {\r\n    if (Number.isFinite(minCreditNum) && c.Limite < minCreditNum)\r\n      return false;\r\n\r\n    const daysFromLastPurchase = daysSince(c.data_ultima_compra);\r\n    if (Number.isFinite(minDaysNum) && daysFromLastPurchase < minDaysNum)\r\n      return false;\r\n\r\n    const daysFromLastInteraction = daysSince(c.ultima_interacao ?? null);\r\n    if (Number.isFinite(lastIntNum) && daysFromLastInteraction < lastIntNum)\r\n      return false;\r\n\r\n    if (sellerTerm) {\r\n      // Ajuste aqui conforme o nome real do campo no tipo Client\r\n      const sellerName = (c.Vendedor || c.Vendedor || \"\").toLowerCase();\r\n      if (!sellerName.includes(sellerTerm)) return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  // üîΩ Ordena:\r\n  // 1¬∫ ‚Äî clientes com √∫ltima intera√ß√£o mais recente (menor n√∫mero de dias)\r\n  // 2¬∫ ‚Äî clientes que nunca interagiram v√£o para o fim\r\n  return validClients.sort((a, b) => {\r\n    const aDate = a.ultima_interacao ? new Date(a.ultima_interacao).getTime() : 0;\r\n    const bDate = b.ultima_interacao ? new Date(b.ultima_interacao).getTime() : 0;\r\n\r\n    if (aDate === 0 && bDate === 0) return 0;  // ambos nunca interagiram\r\n    if (aDate === 0) return 1; // a nunca interagiu ‚Üí vai pra baixo\r\n    if (bDate === 0) return -1; // b nunca interagiu ‚Üí vai pra baixo\r\n    return bDate - aDate; // mais recente primeiro\r\n  });\r\n}, [clients, minCredit, minDays, lastInteraction, seller]);\r\n\r\n\r\n  const allFilteredSelected =\r\n    filteredClients.length > 0 &&\r\n    filteredClients.every((c) => selected[keyOf(c.id_cliente)]);\r\n\r\n  const toggleOne = (id: string | number) =>\r\n    setSelected((prev) => {\r\n      const k = keyOf(id);\r\n      const next = { ...prev };\r\n      if (next[k]) delete next[k];\r\n      else next[k] = true;\r\n      return next;\r\n    });\r\n\r\n  const toggleSelectAll = () =>\r\n    setSelected((prev) => {\r\n      const next = { ...prev };\r\n      if (allFilteredSelected) {\r\n        filteredClients.forEach((c) => delete next[keyOf(c.id_cliente)]);\r\n      } else {\r\n        filteredClients.forEach((c) => (next[keyOf(c.id_cliente)] = true));\r\n      }\r\n      return next;\r\n    });\r\n\r\n  const handleResult = (s: any) => {\r\n    setSummary(s);\r\n    setSending(false);\r\n  };\r\n\r\n  const resetAfterSend = () => {\r\n    setSelected({});\r\n    setMessageID(\"\");\r\n    setMessageSearch(\"\");\r\n  };\r\n\r\n  return (\r\n                            // h-min - altura Header\r\n    <div className=\"flex-1 min-h-[calc(100vh-4rem)] bg-[#e6e8ef] py-8\"> \r\n      <div className=\"flex-1 mx-auto w-full max-w-screen-2xl px-6 xl:px-12\">\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-10 lg:gap-16\">\r\n          {/* LEFT */}\r\n          <div className=\"flex flex-col gap-6\">\r\n            <FiltersBar\r\n              minCredit={minCredit}\r\n              setMinCredit={setMinCredit}\r\n              minDaysSince={minDays}\r\n              setMinDaysSince={setMinDays}\r\n              lastInteraction={lastInteraction}\r\n              setLastInteraction={setLastInteraction}\r\n              seller={seller}\r\n              setSeller={setSeller}\r\n            />\r\n\r\n            <ClientsTable\r\n              clients={filteredClients}\r\n              selectedMap={selected}\r\n              onToggle={toggleOne}\r\n              allFilteredSelected={allFilteredSelected}\r\n              onToggleSelectAll={toggleSelectAll}\r\n            />\r\n\r\n            <div className=\"bg-white rounded-2xl p-6 shadow-md\">\r\n              <h3 className=\"text-lg font-medium mb-3 text-gray-700\">Envio</h3>\r\n              <MessagePreview message={selectedMessage} />\r\n              <SendActions\r\n                sending={sending}\r\n                selectedMap={selected}\r\n                clients={filteredClients}\r\n                contacts={Contacts}\r\n                selectedMessage={selectedMessage}\r\n                onResult={handleResult}\r\n                onResetSelection={resetAfterSend}\r\n              />\r\n              <ResultSummary summary={summary} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* RIGHT */}\r\n          <aside className=\"flex flex-col gap-4\">\r\n            <MessagesPanel\r\n              messages={Messages}\r\n              search={messageSearch}\r\n              setSearch={setMessageSearch}\r\n              selectedMessageID={messageID}\r\n              onSelectMessage={setMessageID}\r\n            />\r\n          </aside>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1340, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/search.js","sources":["file:///C:/Users/yasmi/Documents/checklist/checklist/node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm21 21-4.34-4.34', key: '14j7rj' }],\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMjEtNC4zNC00LjM0IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAoB,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACjD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAU;YAAE,CAAA,CAAA,CAAA,CAAI,IAAA,CAAA;YAAM,CAAA,CAAA,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAG,CAAA,CAAA,CAAA;YAAK,CAAA,CAAA,CAAA,CAAA,CAAK,QAAA;QAAA,CAAU;KAAA;CAC1D;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,MAAA,CAAA,CAAA,KAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,8JAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA","debugId":null}}]
}